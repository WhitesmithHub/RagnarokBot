# -*- coding: utf-8 -*-
# app/core/campaign_items.py
from __future__ import annotations

import random
from typing import Dict, List, Optional

# РљР°РјРїР°РЅРёСЏ: Р·Р°С‚РјРµРЅРёРµ / РІРѕР·РІСЂР°С‰РµРЅРёРµ РІР°РјРїРёСЂСЃРєРѕРіРѕ РєРЅСЏР·СЏ (Р±РµР· В«Р°РЅС‚Рё-РЅРµР¶РёС‚РёВ» Рё Р±РµР· РєРѕРЅС‚СЂРѕР»-С‡Р°РЅСЃРѕРІ/РїСЂРѕРґР»РµРЅРёСЏ РґРµР±Р°С„С„РѕРІ)
_CAMPAIGN_ITEMS: Dict[str, List[Dict]] = {
    "vampire_eclipse": [
        # -------------------- SWORDSMAN --------------------
        # РћР±С‹С‡РЅС‹Р№ (1-5)
        {
            "name": "РњРµС‡ СЃСѓРјРµСЂРµС‡РЅРѕРіРѕ РґРѕР·РѕСЂР°",
            "kind": "weapon", "dmg": "+1", "price": 26, "rarity": "РћР±С‹С‡РЅС‹Р№", "level": "1-5",
            "desc": "РљР»РёРЅРѕРє, РїСЂРёРІС‹РєС€РёР№ Рє РЅРѕС‡РЅС‹Рј РєР°СЂР°СѓР»Р°Рј. Р’ СЃСѓРјРµСЂРєР°С… РґРµСЂР¶РёС‚ Р»РёРЅРёСЋ СѓРґР°СЂР° СЂРѕРІРЅРѕ.",
        },
        {
            "name": "РљРѕР»СЊС‡СѓРіР° РґРѕР·РѕСЂР°",
            "kind": "armor", "material": "heavy", "def": "+1", "price": 25, "rarity": "РћР±С‹С‡РЅС‹Р№", "level": "1-5",
            "desc": "Р—РІРµРЅРёС‚ РЅРµРіСЂРѕРјРєРѕ, РєР°Рє С€Р°Рі РїРѕ РїСѓСЃС‚С‹Рј СѓР»РёС†Р°Рј РїРѕСЃР»Рµ РєРѕРјРµРЅРґР°РЅС‚СЃРєРѕРіРѕ С‡Р°СЃР°.",
        },
        # Р РµРґРєРёР№ (5-12)
        {
            "name": "РљР»РёРЅРѕРє РќРѕС‡РЅРѕРіРѕ РїР°СЂР°РґР°",
            "kind": "weapon", "dmg": "+1", "price": 110, "rarity": "Р РµРґРєРёР№", "level": "5-12",
            "desc": "РџРѕР»РёСЂРѕРІР°РЅРЅР°СЏ СЃС‚Р°Р»СЊ, С‡С‚Рѕ СЃРєРѕР»СЊР·РёС‚ РІ РІРѕР·РґСѓС…Рµ Р±РµР· СЌС…Р°.",
            "bonus": "РїРµСЂРІР°СЏ Р°С‚Р°РєР° РІ Р±РѕСЋ РЅР°РЅРѕСЃРёС‚ +2 СѓСЂРѕРЅР°",
        },
        {
            "name": "РќРѕС‡РЅРѕР№ РїР°РЅС†РёСЂСЊ",
            "kind": "armor", "material": "heavy", "def": "+1", "price": 108, "rarity": "Р РµРґРєРёР№", "level": "5-12",
            "desc": "РўС‘РјРЅС‹Р№ РјРµС‚Р°Р»Р» РґРµСЂР¶РёС‚ СѓРґР°СЂ, Р±СѓРґС‚Рѕ СѓРІРѕРґРёС‚ РµРіРѕ РІ РіР»СѓР±РёРЅСѓ.",
            "bonus": "20% С€Р°РЅСЃ РѕС‚СЂР°Р·РёС‚СЊ 1 СѓСЂРѕРЅ Р°С‚Р°РєСѓСЋС‰РµРјСѓ",
        },
        # Р›РµРіРµРЅРґР°СЂРЅС‹Р№ (10-12)
        {
            "name": "РљР»РёРЅРѕРє РђР»РѕРіРѕ РєСЂСѓРіР°",
            "kind": "weapon", "dmg": "+2", "price": 235, "rarity": "Р›РµРіРµРЅРґР°СЂРЅС‹Р№", "level": "10-12",
            "desc": "Р“Р°СЂРґР° Р·Р°РјРєРЅСѓС‚Р° РІ РєСЂСѓРі, РєР°Рє РґРёСЃРє Р·Р°С‚РјРµРЅРёСЏ. РЈРґР°СЂ РѕР±СЂС‹РІР°РµС‚СЃСЏ РІСЃРїС‹С€РєРѕР№.",
            "bonus": "РєР°Р¶РґС‹Р№ 4-Р№ СѓРґР°СЂ СЃС‚Р°РЅРѕРІРёС‚СЃСЏ РєСЂРёС‚РёС‡РµСЃРєРёРј",
        },
        {
            "name": "Р›Р°С‚С‹ РљСЂРѕРІР°РІРѕРіРѕ Р·Р°С‚РјРµРЅРёСЏ",
            "kind": "armor", "material": "heavy", "def": "+2", "price": 235, "rarity": "Р›РµРіРµРЅРґР°СЂРЅС‹Р№", "level": "10-12",
            "desc": "РЁРІС‹, РєР°Рє РѕСЂР±РёС‚С‹: СѓР·РѕСЂ РІРµРґС‘С‚ СѓРґР°СЂ РјРёРјРѕ СЃРµСЂРґС†Р°.",
            "bonus": "1 СЂР°Р· Р·Р° Р±РѕР№ Р±Р»РѕРєРёСЂСѓРµС‚ РІРµСЃСЊ СѓСЂРѕРЅ РѕРґРЅРѕР№ Р°С‚Р°РєРё",
        },

        # -------------------- MAGE --------------------
        # РћР±С‹С‡РЅС‹Р№ (1-5)
        {
            "name": "РџРѕСЃРѕС… СЃСѓРјРµСЂРµС‡РЅРѕРіРѕ СѓС‡РµРЅРёРєР°",
            "kind": "weapon", "dmg": "+1", "price": 21, "rarity": "РћР±С‹С‡РЅС‹Р№", "level": "1-5",
            "desc": "Р“РёР±РєРѕРµ РґСЂРµРІРєРѕ, СЂСѓРЅР° РЅР° РЅР°РІРµСЂС€РёРё СЃРѕРіСЂРµРІР°РµС‚ РїР°Р»СЊС†С‹.",
        },
        {
            "name": "РњР°РЅС‚РёСЏ РЅР°Р±Р»СЋРґР°С‚РµР»СЏ",
            "kind": "armor", "material": "robe", "def": "+1", "price": 20, "rarity": "РћР±С‹С‡РЅС‹Р№", "level": "1-5",
            "desc": "РЎРµСЂР°СЏ С‚РєР°РЅСЊ, РІ РєРѕС‚РѕСЂРѕР№ РЅРѕС‡СЊ Р±Р»РёР¶Рµ, С‡РµРј РєР°Р¶РµС‚СЃСЏ.",
        },
        # Р РµРґРєРёР№ (5-12)
        {
            "name": "Р–РµР·Р» РљСЂРѕРІР°РІРѕР№ Р›СѓРЅС‹",
            "kind": "weapon", "dmg": "+1", "price": 132, "rarity": "Р РµРґРєРёР№", "level": "5-12",
            "desc": "Р’ РЅР°РІРµСЂС€РёРё РґСЂРѕР¶РёС‚ СЂСѓР±РёРЅРѕРІР°СЏ РєР°РїР»СЏ вЂ” СЂРѕРІРЅС‹Р№ РїСЂРёР»РёРІ СЃРёР»С‹.",
            "bonus": "Р·Р°РєР»РёРЅР°РЅРёСЏ РёРјРµСЋС‚ +10% С€Р°РЅСЃ РєСЂРёС‚РёС‡РµСЃРєРѕРіРѕ СѓСЂРѕРЅР°",
        },
        {
            "name": "Р РѕР±Р° Р›СѓРЅРЅРѕР№ С‚РµРЅРё",
            "kind": "armor", "material": "robe", "def": "+1", "price": 105, "rarity": "Р РµРґРєРёР№", "level": "5-12",
            "desc": "РўРєР°РЅСЊ РїР»С‹РІС‘С‚, РЅРµ С€СѓСЂС€Р°. РџРѕРґС…РѕРґРёС‚ РґР»СЏ С‚РёС…РѕРіРѕ СЃР»РѕРІР°.",
            "bonus": "+5% С€Р°РЅСЃ СѓРєР»РѕРЅРµРЅРёСЏ",
        },
        # Р›РµРіРµРЅРґР°СЂРЅС‹Р№ (10-12)
        {
            "name": "РЎРєРёРїРµС‚СЂ Р›СѓРЅРЅРѕР№ С‚СЊРјС‹",
            "kind": "weapon", "dmg": "+2", "price": 240, "rarity": "Р›РµРіРµРЅРґР°СЂРЅС‹Р№", "level": "10-12",
            "desc": "РўС‘РјРЅРѕРµ РґРµСЂРµРІРѕ РЅРµ РѕС‚СЂР°Р¶Р°РµС‚ СЃРІРµС‚ вЂ” СЃР»РѕРІР° РґРµСЂР¶Р°С‚СЃСЏ РІ РІРѕР·РґСѓС…Рµ РґРѕР»СЊС€Рµ.",
            "bonus": "РєР°Р¶РґС‹Р№ 3-Р№ СѓРґР°СЂ РЅР°РЅРѕСЃРёС‚ РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅРѕ +2 СѓСЂРѕРЅР°",
        },
        {
            "name": "РћРґРµСЏРЅРёРµ Р‘РµР·РјРѕР»РІРЅРѕРіРѕ Р·Р°С‚РјРµРЅРёСЏ",
            "kind": "armor", "material": "robe", "def": "+2", "price": 232, "rarity": "Р›РµРіРµРЅРґР°СЂРЅС‹Р№", "level": "10-12",
            "desc": "РўРѕРЅРєРёР№ С€РѕРІ, РєР°Рє Р»СѓРЅРЅР°СЏ РґСѓР¶РєР°, РґРµСЂР¶РёС‚ С„РѕСЂРјСѓ С‚РёС€РёРЅС‹.",
            "bonus": "РїРѕСЃР»Рµ СѓСЃРїРµС€РЅРѕРіРѕ Р·Р°РєР»РёРЅР°РЅРёСЏ Р»РµС‡РёС‚ РІР»Р°РґРµР»СЊС†Р° РЅР° 1 HP (1 СЂР°Р· Р·Р° Р±РѕР№)",
        },

        # -------------------- THIEF --------------------
        # РћР±С‹С‡РЅС‹Р№ (1-5)
        {
            "name": "РљРёРЅР¶Р°Р» СЃСѓРјРµСЂРµС‡РЅРѕР№ СѓР»РѕС‡РєРё",
            "kind": "weapon", "dmg": "+1", "price": 24, "rarity": "РћР±С‹С‡РЅС‹Р№", "level": "1-5",
            "desc": "РљРѕСЂРѕС‚РєРёР№ РєР»РёРЅРѕРє Р±РµР· Р±Р»РёРєР° вЂ” С€Р°Рі РєРѕСЂРѕС‡Рµ, С‚РµРЅСЊ РґР»РёРЅРЅРµРµ.",
        },
        {
            "name": "РљРѕР¶Р°РЅР°СЏ РєСѓСЂС‚РєР° С‚РµРЅРµР№",
            "kind": "armor", "material": "leather", "def": "+1", "price": 22, "rarity": "РћР±С‹С‡РЅС‹Р№", "level": "1-5",
            "desc": "РњСЏРіРєР°СЏ РєРѕР¶Р°, С‡С‚Рѕ Р·Р°РїРѕРјРёРЅР°РµС‚ РјР°СЂС€СЂСѓС‚С‹ РєСЂС‹С€.",
        },
        # Р РµРґРєРёР№ (5-12)
        {
            "name": "РљР°С‚Р°СЂ Р‘РµСЃС€СѓРјРЅРѕРіРѕ РІР·РґРѕС…Р°",
            "kind": "weapon", "dmg": "+1", "price": 118, "rarity": "Р РµРґРєРёР№", "level": "5-12",
            "desc": "Р›РµР·РІРёРµ Р±РµР· РѕС‚СЂР°Р¶РµРЅРёСЏ. РџРµСЂРІС‹Р№ СѓРґР°СЂ вЂ” СЂРµС€РµРЅРёРµ.",
            "bonus": "РїРµСЂРІР°СЏ Р°С‚Р°РєР° РІ Р±РѕСЋ РЅР°РЅРѕСЃРёС‚ +2 СѓСЂРѕРЅР°",
        },
        {
            "name": "Р›С‘РіРєР°СЏ Р±СЂРѕРЅСЏ СЃР»РµРґРѕРїС‹С‚Р° РЅРѕС‡Рё",
            "kind": "armor", "material": "leather", "def": "+1", "price": 96, "rarity": "Р РµРґРєРёР№", "level": "5-12",
            "desc": "РџРѕРґРєР»Р°РґРєР° РіР°СЃРёС‚ С€РѕСЂРѕС…. РЎРІРѕР±РѕРґРЅС‹Р№ С…РѕРґ вЂ” РїРѕР»РѕРІРёРЅР° СѓРґР°С‡Рё.",
            "bonus": "+5% С€Р°РЅСЃ СѓРєР»РѕРЅРµРЅРёСЏ",
        },
        # Р›РµРіРµРЅРґР°СЂРЅС‹Р№ (10-12)
        {
            "name": "РљР°С‚Р°СЂ РљСЂРѕРІР°РІРѕР№ С‚РёС€Рё",
            "kind": "weapon", "dmg": "+2", "price": 232, "rarity": "Р›РµРіРµРЅРґР°СЂРЅС‹Р№", "level": "10-12",
            "desc": "Р›РµР·РІРёРµ, РЅР° РєРѕС‚РѕСЂРѕРј РЅРµ Р·Р°РґРµСЂР¶РёРІР°РµС‚СЃСЏ СЃРІРµС‚.",
            "bonus": "РєР°Р¶РґС‹Р№ 4-Р№ СѓРґР°СЂ СЃС‚Р°РЅРѕРІРёС‚СЃСЏ РєСЂРёС‚РёС‡РµСЃРєРёРј",
        },
        {
            "name": "РўРєР°РЅСЊ Р±РµР·Р·РІСѓС‡РЅРѕРіРѕ С€Р°РіР°",
            "kind": "armor", "material": "leather", "def": "+2", "price": 225, "rarity": "Р›РµРіРµРЅРґР°СЂРЅС‹Р№", "level": "10-12",
            "desc": "РџР»РѕС‚РЅР°СЏ РјР°С‚РѕРІР°СЏ РЅРёС‚СЊ вЂ” С‚РµРЅСЊ РґРµСЂР¶РёС‚ С€Р°Рі.",
            "bonus": "1 СЂР°Р· Р·Р° Р±РѕР№ Р±Р»РѕРєРёСЂСѓРµС‚ РІРµСЃСЊ СѓСЂРѕРЅ РѕРґРЅРѕР№ Р°С‚Р°РєРё",
        },

        # -------------------- ACOLYTE --------------------
        # РћР±С‹С‡РЅС‹Р№ (1-5)
        {
            "name": "Р‘СѓР»Р°РІР° РјРѕРЅР°СЃС‚С‹СЂСЃРєРѕРіРѕ РєР°СЂР°СѓР»Р°",
            "kind": "weapon", "dmg": "+1", "price": 22, "rarity": "РћР±С‹С‡РЅС‹Р№", "level": "1-5",
            "desc": "Р“Р»Р°РґРєР°СЏ СЂСѓРєРѕСЏС‚СЊ, РЅР°С‚С‘СЂС‚Р°СЏ Р»Р°РґРѕРЅСЏРјРё СѓС‡РµРЅРёРєРѕРІ.",
        },
        {
            "name": "Р РѕР±Р° РІРµС‡РµСЂРЅРµР№ СЃР»СѓР¶Р±С‹",
            "kind": "armor", "material": "robe", "def": "+1", "price": 21, "rarity": "РћР±С‹С‡РЅС‹Р№", "level": "1-5",
            "desc": "РўРєР°РЅСЊ СЃС€РёС‚Р° С‚Р°Рє, С‡С‚РѕР±С‹ РјРѕР»РёС‚РІР° Р»РѕР¶РёР»Р°СЃСЊ СЂРѕРІРЅРѕ.",
        },
        # Р РµРґРєРёР№ (5-12)
        {
            "name": "РњРѕР»РѕС‚ РїРѕРіСЂРµР±Р°Р»СЊРЅС‹С… РїСЃР°Р»РјРѕРІ",
            "kind": "weapon", "dmg": "+1", "price": 120, "rarity": "Р РµРґРєРёР№", "level": "5-12",
            "desc": "Р“СЂР°РЅРё РїРѕСЋС‚ РЅРёР·РєРѕ Рё РґРѕР»РіРѕ.",
            "bonus": "РєСЂРёС‚РёС‡РµСЃРєРёР№ СѓРґР°СЂ Р»РµС‡РёС‚ РІР»Р°РґРµР»СЊС†Р° РЅР° 1 HP",
        },
        {
            "name": "Р РёР·Р° РІРµС‡РµСЂРЅРµР№ РјРѕР»РёС‚РІС‹",
            "kind": "armor", "material": "robe", "def": "+1", "price": 102, "rarity": "Р РµРґРєРёР№", "level": "5-12",
            "desc": "РўРёС…Р°СЏ С‚РєР°РЅСЊ, РЅР° РєРѕС‚РѕСЂРѕР№ РЅРё СЃРєР»Р°РґРєРё, РЅРё СЃРѕРјРЅРµРЅРёР№.",
            "bonus": "РІ РєРѕРЅС†Рµ Р±РѕСЏ Р»РµС‡РёС‚ РІР»Р°РґРµР»СЊС†Р° РЅР° 1 HP",
        },
        # Р›РµРіРµРЅРґР°СЂРЅС‹Р№ (10-12)
        {
            "name": "Р‘СѓР»Р°РІР° Р°Р»С‚Р°СЂРЅРѕРіРѕ РєСЂСѓРіР°",
            "kind": "weapon", "dmg": "+2", "price": 228, "rarity": "Р›РµРіРµРЅРґР°СЂРЅС‹Р№", "level": "10-12",
            "desc": "Р РµР·РЅРѕР№ РІРµРЅРµС† РЅР° РіРѕР»РѕРІРєРµ РґРµСЂР¶РёС‚ СѓРґР°СЂ РІ РјРѕР»РёС‚РІРµРЅРЅРѕРј СЂРёС‚РјРµ.",
            "bonus": "РєР°Р¶РґС‹Р№ 3-Р№ СѓРґР°СЂ РЅР°РЅРѕСЃРёС‚ РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅРѕ +2 СѓСЂРѕРЅР°",
        },
        {
            "name": "Р РёР·Р° РїРѕР»РЅРѕРіРѕ РєСЂСѓРіР°",
            "kind": "armor", "material": "robe", "def": "+2", "price": 225, "rarity": "Р›РµРіРµРЅРґР°СЂРЅС‹Р№", "level": "10-12",
            "desc": "РљСЂР°СЏ СЃС…РѕРґСЏС‚СЃСЏ, РєР°Рє Р»СѓРЅРЅС‹Р№ РѕР±СЂСѓС‡ вЂ” Р»Р°РґРЅРѕ Рё РЅР°РґС‘Р¶РЅРѕ.",
            "bonus": "РїРѕР»СѓС‡Р°РµРјС‹Р№ СѓСЂРѕРЅ РѕС‚ РѕРґРЅРѕР№ Р°С‚Р°РєРё 1 СЂР°Р· Р·Р° Р±РѕР№ СЃРЅРёР¶Р°РµС‚СЃСЏ РЅР° 2",
        },

        # -------------------- ARCHER --------------------
        # РћР±С‹С‡РЅС‹Р№ (1-5)
        {
            "name": "РљРѕСЂРѕС‚РєРёР№ Р»СѓРє СЃСѓРјРµСЂРµРє",
            "kind": "weapon", "dmg": "+1", "price": 25, "rarity": "РћР±С‹С‡РЅС‹Р№", "level": "1-5",
            "desc": "РЎСѓС…Р°СЏ С‚РµС‚РёРІР° Р·РІРµРЅРёС‚ С‚РёС…Рѕ, РєР°Рє С‰РµРїРѕС‚РєР° РїРµСЃРєР°.",
        },
        {
            "name": "РџР»Р°С‰ РѕС…РѕС‚РЅРёРєР° Р·Р°РєР°С‚Р°",
            "kind": "armor", "material": "leather", "def": "+1", "price": 23, "rarity": "РћР±С‹С‡РЅС‹Р№", "level": "1-5",
            "desc": "РњР°С‚РѕРІР°СЏ С‚РєР°РЅСЊ, РЅР° РєРѕС‚РѕСЂРѕР№ СЃСѓРјРµСЂРєРё РґРµСЂР¶Р°С‚СЃСЏ РґРѕР»СЊС€Рµ.",
        },
        # Р РµРґРєРёР№ (5-12)
        {
            "name": "Р›СѓРє РїРѕР»СѓС‚РµРЅРё",
            "kind": "weapon", "dmg": "+1", "price": 112, "rarity": "Р РµРґРєРёР№", "level": "5-12",
            "desc": "Р›С‘РіРєРѕРµ РґСЂРµРІРєРѕ, С‡С‚Рѕ Р»СЋР±РёС‚ РґР°Р»СЊ Рё СЂРѕРІРЅС‹Р№ РІС‹РґРѕС….",
            "bonus": "+10% С€Р°РЅСЃ РєСЂРёС‚РёС‡РµСЃРєРѕРіРѕ СѓСЂРѕРЅР° РґР»СЏ РґР°Р»СЊРЅРёС… Р°С‚Р°Рє",
        },
        {
            "name": "РџР»Р°С‰ РљСЂРѕРІР°РІРѕРіРѕ СЂР°СЃСЃРІРµС‚Р°",
            "kind": "armor", "material": "leather", "def": "+1", "price": 112, "rarity": "Р РµРґРєРёР№", "level": "5-12",
            "desc": "Р’РµС‚РµСЂ РїСЂРёС†РµР»РёРІР°РµС‚СЃСЏ РІРјРµСЃС‚Рµ СЃ С‚РµС‚РёРІРѕР№.",
            "bonus": "+10% С€Р°РЅСЃ РєСЂРёС‚РёС‡РµСЃРєРѕРіРѕ СѓСЂРѕРЅР° РґР»СЏ РґР°Р»СЊРЅРёС… Р°С‚Р°Рє",
        },
        # Р›РµРіРµРЅРґР°СЂРЅС‹Р№ (10-12)
        {
            "name": "Р›СѓРє РђР»РѕРіРѕ СЃРµСЂРїР°",
            "kind": "weapon", "dmg": "+2", "price": 232, "rarity": "Р›РµРіРµРЅРґР°СЂРЅС‹Р№", "level": "10-12",
            "desc": "Р”СѓРіР°, С‡С‚Рѕ РїРѕРІС‚РѕСЂСЏРµС‚ Р»СѓРЅРЅС‹Р№ РєСЂР°Р№. РЎС‚СЂРµР»С‹ СѓС…РѕРґСЏС‚ Р±РµР· РєРѕР»РµР±Р°РЅРёР№.",
            "bonus": "РїРµСЂРІР°СЏ Р°С‚Р°РєР° РІ Р±РѕСЋ РІСЃРµРіРґР° РєСЂРёС‚РёС‡РµСЃРєР°СЏ",
        },
        {
            "name": "РљР°РїСЋС€РѕРЅ РљСЂР°СЃРЅРѕР№ Р»СѓРЅС‹",
            "kind": "armor", "material": "leather", "def": "+2", "price": 225, "rarity": "Р›РµРіРµРЅРґР°СЂРЅС‹Р№", "level": "10-12",
            "desc": "РўРµРЅСЊ Р»РѕР¶РёС‚СЃСЏ РЅР° РіР»Р°Р·Р° РјСЏРіРєРѕ, РєР°Рє Р±Р°СЂС…Р°С‚.",
            "bonus": "15% С€Р°РЅСЃ СѓРєР»РѕРЅРёС‚СЊСЃСЏ РѕС‚ Р°С‚Р°РєРё",
        },

        # -------------------- MERCHANT --------------------
        # РћР±С‹С‡РЅС‹Р№ (1-5)
        {
            "name": "РљРёРЅР¶Р°Р» РЅРѕС‡РЅРѕРіРѕ С‚РѕСЂРіР°",
            "kind": "weapon", "dmg": "+1", "price": 24, "rarity": "РћР±С‹С‡РЅС‹Р№", "level": "1-5",
            "desc": "Р РµР·РµС† РґР»СЏ СѓР·Р»РѕРІС‹С… СЃРёС‚СѓР°С†РёР№ Рё С‚РѕРЅРєРёС… Р°СЂРіСѓРјРµРЅС‚РѕРІ.",
        },
        {
            "name": "РљРѕР¶Р°РЅР°СЏ Р¶РёР»РµС‚РєР° СЂРѕСЃС‚РѕРІС‰РёРєР°",
            "kind": "armor", "material": "leather", "def": "+1", "price": 22, "rarity": "РћР±С‹С‡РЅС‹Р№", "level": "1-5",
            "desc": "РљР°СЂРјР°РЅС‹ РїРѕРјРЅСЏС‚ С‡РёСЃР»Рѕ РјРѕРЅРµС‚ Р»СѓС‡С€Рµ РєРЅРёРі.",
        },
        # Р РµРґРєРёР№ (5-12)
        {
            "name": "Р‘СѓР»Р°РІР° РїРёСЃС†Р° РєРѕРЅС‚СЂР°РєС‚РѕРІ",
            "kind": "weapon", "dmg": "+1", "price": 106, "rarity": "Р РµРґРєРёР№", "level": "5-12",
            "desc": "РќР° СЂСѓРєРѕСЏС‚Рё Р·Р°СЂСѓР±РєРё вЂ” СЃСЂРѕРєРё, РїСЂРѕС†РµРЅС‚С‹ Рё РѕР±РµС‰Р°РЅРёСЏ.",
            "bonus": "РїРµСЂРІР°СЏ Р°С‚Р°РєР° РІ Р±РѕСЋ РЅР°РЅРѕСЃРёС‚ +2 СѓСЂРѕРЅР°",
        },
        {
            "name": "РљРёСЂР°СЃР° РўС‘РјРЅРѕРіРѕ С‚РѕСЂРіР°",
            "kind": "armor", "material": "leather", "def": "+1", "price": 112, "rarity": "Р РµРґРєРёР№", "level": "5-12",
            "desc": "РњСЏРіРєРёРµ РїР»Р°СЃС‚РёРЅС‹ РіР»СѓС€Р°С‚ С‡СѓР¶РѕР№ РЅР°РїРѕСЂ.",
            "bonus": "20% С€Р°РЅСЃ РѕС‚СЂР°Р·РёС‚СЊ 1 СѓСЂРѕРЅ Р°С‚Р°РєСѓСЋС‰РµРјСѓ",
        },
        # Р›РµРіРµРЅРґР°СЂРЅС‹Р№ (10-12)
        {
            "name": "РљРёРЅР¶Р°Р» Р›СѓРЅРЅРѕРіРѕ СЃС‡С‘С‚Р°",
            "kind": "weapon", "dmg": "+2", "price": 230, "rarity": "Р›РµРіРµРЅРґР°СЂРЅС‹Р№", "level": "10-12",
            "desc": "РљР»РёРЅРѕРє РїРѕРґРІРѕРґРёС‚ РёС‚РѕРі СЃРїРѕСЂСѓ Р±С‹СЃС‚СЂРµРµ Р±СѓС…РіР°Р»С‚РµСЂРёРё.",
            "bonus": "РєР°Р¶РґС‹Р№ 3-Р№ СѓРґР°СЂ РЅР°РЅРѕСЃРёС‚ РґРѕРїРѕР»РЅРёС‚РµР»СЊРЅРѕ +2 СѓСЂРѕРЅР°",
        },
        {
            "name": "РџР°РЅС†РёСЂСЊ РќРѕС‡РЅРѕРіРѕ РґРІРѕСЂС†Р° РѕР±РјРµРЅРѕРІ",
            "kind": "armor", "material": "leather", "def": "+2", "price": 228, "rarity": "Р›РµРіРµРЅРґР°СЂРЅС‹Р№", "level": "10-12",
            "desc": "РљСЂРµРїРєРёРµ РІСЃС‚Р°РІРєРё, Р±СѓРґС‚Рѕ С€С‚РµРјРїРµР»Рё РІ РєРЅРёРіРµ СЃРґРµР»РѕРє.",
            "bonus": "20% С€Р°РЅСЃ РѕС‚СЂР°Р·РёС‚СЊ 1 СѓСЂРѕРЅ Р°С‚Р°РєСѓСЋС‰РµРјСѓ",
        },
    ]
}

def get_campaign_pool(campaign_id: Optional[str]) -> List[Dict]:
    """Р’РµСЂРЅСѓС‚СЊ РїСѓР» РїСЂРµРґРјРµС‚РѕРІ РєР°РјРїР°РЅРёРё (РёР»Рё РїСѓСЃС‚РѕР№ СЃРїРёСЃРѕРє)."""
    if not campaign_id:
        return []
    return list(_CAMPAIGN_ITEMS.get(campaign_id, []))

def pick_campaign_items(
    campaign_id: Optional[str],
    k: int,
    class_key: Optional[str] = None
) -> List[Dict]:
    """
    РЎСЌРјРїР» РїСЂРµРґРјРµС‚РѕРІ РєР°РјРїР°РЅРёРё. Р•СЃР»Рё СѓРєР°Р·Р°РЅ class_key вЂ” РїСЂРµРґРјРµС‚С‹ РїРѕРґР±РёСЂР°СЋС‚СЃСЏ
    С‚Р°Рє, С‡С‚РѕР±С‹ РёС… РјРѕРі РЅР°РґРµС‚СЊ РґР°РЅРЅС‹Р№ РєР»Р°СЃСЃ (С‡РµСЂРµР· РєР»СЋС‡РµРІС‹Рµ СЃР»РѕРІР° Рё РјР°С‚РµСЂРёР°Р»).
    """
    pool = get_campaign_pool(campaign_id)
    if not pool:
        return []

    def fits_class(item: Dict) -> bool:
        if not class_key:
            return True
        name = (item.get("name") or "").lower()
        kind = item.get("kind")
        material = item.get("material")

        if kind == "weapon":
            if class_key == "swordsman":
                return any(w in name for w in ("РјРµС‡", "РєР»РёРЅРѕРє"))
            if class_key == "archer":
                return "Р»СѓРє" in name
            if class_key == "thief":
                return any(w in name for w in ("РєРёРЅР¶Р°Р»", "РєР°С‚Р°СЂ"))
            if class_key == "mage":
                return any(w in name for w in ("РїРѕСЃРѕС…", "Р¶РµР·Р»"))
            if class_key == "acolyte":
                return any(w in name for w in ("Р±СѓР»Р°РІР°", "РјРѕР»РѕС‚"))
            if class_key == "merchant":
                return any(w in name for w in ("РєРёРЅР¶Р°Р»", "Р±СѓР»Р°РІР°", "РјРѕР»РѕС‚"))
            return True

        if kind == "armor":
            if class_key == "mage":
                return material == "robe"
            if class_key in ("thief", "archer", "merchant"):
                return material == "leather"
            if class_key == "acolyte":
                return material in ("robe", "leather")
            if class_key == "swordsman":
                return material in ("leather", "heavy")
            return True
        return True

    filtered = [x for x in pool if fits_class(x)]
    if not filtered:
        filtered = pool  # fallback

    k = max(0, min(k, len(filtered)))
    return random.sample(filtered, k=k) if k else []


def find_campaign_item_by_name(name: str) -> Optional[Dict]:
    """РџРѕРёСЃРє РїСЂРµРґРјРµС‚Р° РїРѕ РёРјРµРЅРё СЃСЂРµРґРё РІСЃРµС… РєР°РјРїР°РЅРёР№РЅС‹С… РїСѓР»РѕРІ."""
    if not name:
        return None
    n = name.strip().lower()
    for items in _CAMPAIGN_ITEMS.values():
        for it in items:
            if (it.get("name") or "").strip().lower() == n:
                return it
    return None



